{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/database';\nimport zomato_ring_3 from '@/components/Utils/zomato_ring_3.mp3';\nimport LoadingSpinner from '../LoadingSpinner.vue';\nimport SingleOrder from './SingleOrder.vue';\nimport OrdersUtil from './OrdersUtil.vue';\nexport default {\n  components: {\n    OrdersUtil,\n    SingleOrder,\n    LoadingSpinner\n  },\n  data() {\n    return {\n      total: '',\n      newItem: {},\n      loading: false,\n      order: {},\n      showSingleOrder: false,\n      items: [{\n        name: 'meeGoreng',\n        price: '60'\n      }, 0],\n      activeTab: 'new-orders',\n      newOrders: [],\n      pastOrders: [],\n      isNewOrder: false\n    };\n  },\n  created() {\n    this.fetchNewOrder();\n    this.fetchNewOrders('new-orders');\n  },\n  methods: {\n    orderStatus(order, url) {\n      this.loading = true;\n      fetch(url, {\n        method: 'post',\n        body: JSON.stringify(order)\n      }).then(() => {\n        const databaseRef = firebase.database().ref('newOrder/' + order.dbId);\n        databaseRef.remove().then(() => {\n          const index = this.newOrders.findIndex(item => item.dbId === order.dbId);\n          if (index !== -1) {\n            this.loading = false;\n            this.newOrders.splice(index, 1);\n          }\n        }).catch(error => {\n          console.error('Error deleting item:', error);\n        });\n      });\n    },\n    rejectOrder(id) {\n      const it = this.newOrders.find(item => item.orderNumber == id);\n      this.orderReady(it, 'https://my-vue-app-8da88-default-rtdb.firebaseio.com/rejectedOrders.json');\n      this.showSingleOrder = false;\n    },\n    acceptOrder() {\n      this.isNewOrder = false;\n    },\n    orderReady(order) {\n      this.orderStatus(order, 'https://my-vue-app-8da88-default-rtdb.firebaseio.com/completedOrders.json');\n    },\n    fetchNewOrder() {\n      firebase.initializeApp({\n        apiKey: 'your-api-key',\n        authDomain: 'your-auth-domain',\n        databaseURL: 'your-database-url',\n        projectId: 'your-project-id',\n        storageBucket: 'your-storage-bucket',\n        messagingSenderId: 'your-messaging-sender-id',\n        appId: 'your-app-id'\n      });\n      const db = firebase.database();\n      db.ref('newOrder').on('child_added', snapshot => {\n        const newItem = snapshot.val();\n        this.newItem = newItem;\n        let total = 0;\n        for (const prop in newItem) {\n          if (typeof newItem[prop] === 'object' && Array.isArray(newItem[prop]) && prop === 'orderItems') {\n            const orderItemsArr = newItem[prop];\n            for (const item of orderItemsArr) {\n              if (typeof item === 'object') {\n                total += +item.totalPrice;\n                this.total = total;\n              }\n            }\n          }\n        }\n        this.fetchNewOrders('new-orders');\n        this.isNewOrder = true;\n        this.showSingleOrder = true;\n        this.playSound();\n        this.showNotification(`New item added: ${newItem}`);\n      });\n    },\n    showNotification(message) {\n      if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification('New Item Added', {\n          body: message\n        });\n      }\n    },\n    playSound() {\n      const audio = new Audio(zomato_ring_3);\n      audio.play();\n    },\n    showDialog(order) {\n      this.isNewOrder = false;\n      this.newItem = [];\n      this.newItem = order;\n      this.showSingleOrder = true;\n    },\n    fetchOrders(url, folder) {\n      this.loading = true;\n      fetch(url).then(response => {\n        return response.json();\n      }).then(data => {\n        for (const item in data) {\n          folder.push({\n            ...data[item],\n            dbId: item\n          });\n        }\n        this.loading = false;\n      });\n    },\n    fetchPastOrders(tab) {\n      this.pastOrders = [];\n      this.activeTab = tab;\n      this.fetchOrders('https://my-vue-app-8da88-default-rtdb.firebaseio.com/completedOrders.json', this.pastOrders);\n    },\n    fetchNewOrders(tab) {\n      this.newOrders = [];\n      this.activeTab = tab;\n      this.fetchOrders('https://my-vue-app-8da88-default-rtdb.firebaseio.com/newOrder.json', this.newOrders);\n    }\n  }\n};","map":{"version":3,"names":["firebase","zomato_ring_3","LoadingSpinner","SingleOrder","OrdersUtil","components","data","total","newItem","loading","order","showSingleOrder","items","name","price","activeTab","newOrders","pastOrders","isNewOrder","created","fetchNewOrder","fetchNewOrders","methods","orderStatus","url","fetch","method","body","JSON","stringify","then","databaseRef","database","ref","dbId","remove","index","findIndex","item","splice","catch","error","console","rejectOrder","id","it","find","orderNumber","orderReady","acceptOrder","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","on","snapshot","val","prop","Array","isArray","orderItemsArr","totalPrice","playSound","showNotification","message","window","Notification","permission","audio","Audio","play","showDialog","fetchOrders","folder","response","json","push","fetchPastOrders","tab"],"sources":["C:\\Users\\ADMIN\\OneDrive\\Desktop\\frostycrunch\\src\\components\\Admin\\FetchedOrders.vue"],"sourcesContent":["<template>\r\n    <div class=\"order-management\">\r\n      <div class=\"navbar\">\r\n        <h1 class=\"brand\">Frosty Galleria</h1>\r\n        <div class=\"options\">\r\n          <router-link to=\"/admin\" class=\"nav-btn\">Home</router-link>\r\n          <button class=\"nav-btn\" :class=\"{ active: activeTab === 'new-orders' }\" @click=\"fetchNewOrders('new-orders')\">New Orders</button>\r\n          <button class=\"nav-btn\" :class=\"{ active: activeTab === 'past-orders' }\" @click=\"fetchPastOrders('past-orders')\">Completed Orders</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"content\">\r\n        <orders-util\r\n          @orderReady=\"orderReady\"\r\n          @showDialog=\"showDialog\"\r\n          v-if=\"activeTab === 'new-orders'\"\r\n          :newOrders=\"newOrders\"\r\n          title=\"New Orders\"\r\n          mode=\"new\"\r\n        ></orders-util>\r\n        <orders-util\r\n          @showDialog=\"showDialog\"\r\n          v-if=\"activeTab === 'past-orders'\"\r\n          :newOrders=\"pastOrders\"\r\n          title=\"Completed Orders\"\r\n          mode=\"past\"\r\n        ></orders-util>\r\n      </div>\r\n      <single-order\r\n        restaurantName=\"Gypsy Chinese - Dalma\"\r\n        :orderNumber=\"newItem.orderNumber\"\r\n        :orderDate=\"newItem.orderDate\"\r\n        :orderTime=\"newItem.orderTime\"\r\n        :customerName=\"order.customerName\"\r\n        :orderItems=\"newItem.orderItems\"\r\n        :vatTax=\"5%\"\r\n        :isNewOrder=\"isNewOrder\"\r\n        :total=\"total\"\r\n        @close=\"showSingleOrder = false\"\r\n        @rejectOrder=\"rejectOrder\"\r\n        @acceptOrder=\"acceptOrder\"\r\n        v-if=\"showSingleOrder\"\r\n      ></single-order>\r\n      <loading-spinner v-if=\"loading\"></loading-spinner>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import firebase from 'firebase/compat/app';\r\n  import 'firebase/compat/database';\r\n  import zomato_ring_3 from '@/components/Utils/zomato_ring_3.mp3';\r\n  import LoadingSpinner from '../LoadingSpinner.vue';\r\n  import SingleOrder from './SingleOrder.vue';\r\n  import OrdersUtil from './OrdersUtil.vue';\r\n  \r\n  export default {\r\n    components: {\r\n      OrdersUtil,\r\n      SingleOrder,\r\n      LoadingSpinner,\r\n    },\r\n    data() {\r\n      return {\r\n        total: '',\r\n        newItem: {},\r\n        loading: false,\r\n        order: {},\r\n        showSingleOrder: false,\r\n        items: [\r\n          { name: 'meeGoreng', price: '60' },\r\n          0,\r\n        ],\r\n        activeTab: 'new-orders',\r\n        newOrders: [],\r\n        pastOrders: [],\r\n        isNewOrder: false,\r\n      };\r\n    },\r\n    created() {\r\n      this.fetchNewOrder();\r\n      this.fetchNewOrders('new-orders');\r\n    },\r\n    methods: {\r\n      orderStatus(order, url) {\r\n        this.loading = true;\r\n        fetch(url, {\r\n          method: 'post',\r\n          body: JSON.stringify(order),\r\n        }).then(() => {\r\n          const databaseRef = firebase.database().ref('newOrder/' + order.dbId);\r\n          databaseRef\r\n            .remove()\r\n            .then(() => {\r\n              const index = this.newOrders.findIndex((item) => item.dbId === order.dbId);\r\n  \r\n              if (index !== -1) {\r\n                this.loading = false;\r\n                this.newOrders.splice(index, 1);\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              console.error('Error deleting item:', error);\r\n            });\r\n        });\r\n      },\r\n      rejectOrder(id) {\r\n        const it = this.newOrders.find((item) => item.orderNumber == id);\r\n  \r\n        this.orderReady(it, 'https://my-vue-app-8da88-default-rtdb.firebaseio.com/rejectedOrders.json');\r\n        this.showSingleOrder = false;\r\n      },\r\n      acceptOrder() {\r\n        this.isNewOrder = false;\r\n      },\r\n      orderReady(order) {\r\n        this.orderStatus(order, 'https://my-vue-app-8da88-default-rtdb.firebaseio.com/completedOrders.json');\r\n      },\r\n  \r\n      fetchNewOrder() {\r\n        firebase.initializeApp({\r\n          apiKey: 'your-api-key',\r\n          authDomain: 'your-auth-domain',\r\n          databaseURL: 'your-database-url',\r\n          projectId: 'your-project-id',\r\n          storageBucket: 'your-storage-bucket',\r\n          messagingSenderId: 'your-messaging-sender-id',\r\n          appId: 'your-app-id',\r\n        });\r\n  \r\n        const db = firebase.database();\r\n        db.ref('newOrder').on('child_added', (snapshot) => {\r\n          const newItem = snapshot.val();\r\n          this.newItem = newItem;\r\n          let total = 0;\r\n  \r\n          for (const prop in newItem) {\r\n            if (typeof newItem[prop] === 'object' && Array.isArray(newItem[prop]) && prop === 'orderItems') {\r\n              const orderItemsArr = newItem[prop];\r\n              for (const item of orderItemsArr) {\r\n                if (typeof item === 'object') {\r\n                  total += +item.totalPrice;\r\n                  this.total = total;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          this.fetchNewOrders('new-orders');\r\n          this.isNewOrder = true;\r\n          this.showSingleOrder = true;\r\n  \r\n          this.playSound();\r\n          this.showNotification(`New item added: ${newItem}`);\r\n        });\r\n      },\r\n      showNotification(message) {\r\n        if ('Notification' in window && Notification.permission === 'granted') {\r\n          new Notification('New Item Added', { body: message });\r\n        }\r\n      },\r\n  \r\n      playSound() {\r\n        const audio = new Audio(zomato_ring_3);\r\n        audio.play();\r\n      },\r\n      showDialog(order) {\r\n        this.isNewOrder = false;\r\n        this.newItem = [];\r\n        this.newItem = order;\r\n        this.showSingleOrder = true;\r\n      },\r\n  \r\n      fetchOrders(url, folder) {\r\n        this.loading = true;\r\n        fetch(url)\r\n          .then((response) => {\r\n            return response.json();\r\n          })\r\n          .then((data) => {\r\n            for (const item in data) {\r\n              folder.push({ ...data[item], dbId: item });\r\n            }\r\n            this.loading = false;\r\n          });\r\n      },\r\n  \r\n      fetchPastOrders(tab) {\r\n        this.pastOrders = [];\r\n        this.activeTab = tab;\r\n        this.fetchOrders('https://my-vue-app-8da88-default-rtdb.firebaseio.com/completedOrders.json', this.pastOrders);\r\n      },\r\n  \r\n      fetchNewOrders(tab) {\r\n        this.newOrders = [];\r\n        this.activeTab = tab;\r\n        this.fetchOrders('https://my-vue-app-8da88-default-rtdb.firebaseio.com/newOrder.json', this.newOrders);\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .order-management {\r\n    font-family: Arial, sans-serif;\r\n    width: 100%;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n  }\r\n  \r\n  .navbar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    background-color: #fd2727;\r\n    height: 60px;\r\n  }\r\n  \r\n  .nav-btn {\r\n    font-size: 18px;\r\n    color: white;\r\n    background-color: transparent;\r\n    border: none;\r\n    padding: 0 20px;\r\n    cursor: pointer;\r\n    transition: all 0.2s ease-in-out;\r\n  }\r\n  \r\n  .nav-btn.active {\r\n    background-color: white;\r\n    color: #ff3f3f;\r\n  }\r\n  \r\n  .content {\r\n    padding: 20px;\r\n  }\r\n  \r\n  .brand {\r\n    color: white;\r\n    margin-left: 1rem;\r\n  }\r\n  \r\n  .options {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-evenly;\r\n  }\r\n  </style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}